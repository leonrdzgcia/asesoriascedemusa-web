<div class="container">
  <h1>Im치genes</h1>

  <!-- Secci칩n de carga de archivos -->
  <mat-card class="upload-card">
    <mat-card-header>
      <mat-card-title>Cargar Nueva Imagen</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <div class="upload-section">
        <input type="file" #fileInput (change)="onFileSelected($event)" accept="image/*" multiple style="display: none;"/>

        <button mat-raised-button color="accent" (click)="fileInput.click()" class="btn-select-file">
          <mat-icon>folder_open</mat-icon> Seleccionar Im치genes
        </button>

        <div class="files-info" *ngIf="selectedFiles.length > 0">
          <div class="file-count">
            <mat-icon>image</mat-icon>
            <span>{{ selectedFiles.length }} imagen(es) seleccionada(s)</span>
          </div>
          <div class="file-list">
            <div class="file-item" *ngFor="let file of selectedFiles">
              <mat-icon>image</mat-icon>
              <span class="file-name">{{ file.name }}</span>
              <span class="file-size">({{ (file.size / 1024 / 1024).toFixed(2) }} MB)</span>
            </div>
          </div>
        </div>

        <button mat-raised-button color="primary" (click)="cargarImagen()" [disabled]="selectedFiles.length === 0 || uploadingFile" class="btn-upload">
          <mat-icon>cloud_upload</mat-icon> {{ uploadingFile ? 'Subiendo...' : 'Subir Im치genes' }}
        </button>

        <button mat-raised-button (click)="actualizarTabla()" class="btn-actualizar">
          <mat-icon>refresh</mat-icon> Actualizar
        </button>

      </div>

      <mat-progress-bar mode="indeterminate" *ngIf="uploadingFile"></mat-progress-bar>
    </mat-card-content>
  </mat-card>

  <div class="table-container" *ngIf="!loading">
    <table mat-table [dataSource]="dataSourceArchivos" class="mat-elevation-z8">

      <ng-container matColumnDef="id">
        <th mat-header-cell *matHeaderCellDef>Id</th>
        <td mat-cell *matCellDef="let element">{{ element.id }}</td>
      </ng-container>

      <ng-container matColumnDef="nombre">
        <th mat-header-cell *matHeaderCellDef>Nombre</th>
        <td mat-cell *matCellDef="let element">{{ element.nombreArchivo }}</td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>

    <div *ngIf="dataSourceArchivos.length === 0" class="no-data">
      No hay archivos disponibles
    </div>
  </div>

  <div class="loading-container" *ngIf="loading">
    <mat-spinner></mat-spinner>
  </div>
</div>
